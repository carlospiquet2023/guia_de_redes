<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Carlos Antonio De Oliveira Piquet">
    <title>Guia Interativo de Redes e Infraestrutura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Fira+Code&display=swap" rel="stylesheet">
    <!-- Palette & Design System by Cline, UI/UX Specialist -->
    <style>
        :root {
            --bg-color: #fdfdff; /* Slightly off-white */
            --text-color: #3a3f50; /* Softer black */
            --text-color-light: #6b7280; /* Lighter gray for secondary text */
            --card-bg: #ffffff;
            --header-bg: rgba(253, 253, 255, 0.8);
            --border-color: rgba(0, 0, 0, 0.07);
            --heading-color: #1a1e2c;
            --accent-color: #2563eb;
            --accent-color-hover: #1d4ed8;
            --code-bg: #1e293b;
            --code-text: #e2e8f0;
            --terminal-bg: #1a1e2c;
            --terminal-text: #e2e8f0;
        }

        html.dark {
            --bg-color: #0b0f1a; /* Deep, dark blue */
            --text-color: #a6b0c4;
            --text-color-light: #717d96;
            --card-bg: #131826;
            --header-bg: rgba(11, 15, 26, 0.7);
            --border-color: rgba(255, 255, 255, 0.1);
            --heading-color: #f0f4ff;
            --accent-color: #38bdf8; /* Brighter blue for dark mode */
            --accent-color-hover: #0ea5e9;
            --code-bg: #020617;
            --code-text: #cbd5e1;
            --terminal-bg: #020617;
            --terminal-text: #94a3b8;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .osi-layer-info {
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .group:hover .osi-layer-info {
            opacity: 1;
            transform: translateX(0);
        }
        .nav-link {
            transition: color 0.2s;
            color: var(--text-color-light);
        }
        .nav-link:hover {
            color: var(--heading-color);
        }
        .nav-link.active {
            color: var(--accent-color);
        }
        .code-block, .terminal {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-family: 'Fira Code', monospace;
            border: 1px solid var(--border-color);
        }
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            transition: transform 0.2s ease-out, box-shadow 0.2s ease-out;
        }
        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.05);
        }
        html.dark .card:hover {
             box-shadow: 0 10px 25px -5px rgba(0,0,0,0.2);
        }
        .main-header {
            background-color: var(--header-bg);
            border-bottom: 1px solid var(--border-color);
        }
        h1, h2, h3, h4, h5, h6 {
            color: var(--heading-color);
        }
        p {
            color: var(--text-color);
            line-height: 1.65;
        }
        p.secondary {
             color: var(--text-color-light);
        }
        .terminal {
            background-color: var(--terminal-bg);
            color: var(--terminal-text);
            min-height: 200px;
        }
        .terminal-prompt {
            color: #4ade80; /* green-400 */
        }
        .btn {
            padding: 0.5rem 1.25rem;
            border-radius: 0.375rem;
            font-weight: 600;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        .btn-primary {
            background-color: var(--accent-color);
            color: white;
        }
        .btn-primary:hover {
            background-color: var(--accent-color-hover);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        html.dark .btn-primary {
            color: var(--bg-color);
        }
        .btn-secondary {
            background-color: transparent;
            border: 1px solid var(--border-color);
            color: var(--heading-color);
        }
        .btn-secondary:hover {
            background-color: var(--bg-color);
            border-color: var(--accent-color);
            color: var(--accent-color);
        }
        .form-input {
            background-color: var(--bg-color);
            border: 1px solid var(--border-color);
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            width: 100%;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .form-input:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px var(--accent-color-hover);
        }
        .tab-btn {
            padding: 0.5rem 1rem;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
            font-weight: 500;
        }
        .tab-btn.active {
            color: var(--accent-color);
            border-bottom-color: var(--accent-color);
        }
    </style>
</head>
<body>

    <header class="main-header backdrop-blur-lg sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center h-16">
                 <h1 class="text-xl font-semibold tracking-tight whitespace-nowrap">Guia de Redes</h1>
                
                <!-- Desktop Nav -->
                <div class="hidden md:flex items-center space-x-1 lg:space-x-2 ml-10">
                    <a href="#fundamentos" class="nav-link font-medium px-3 py-2 rounded-md">Fundamentos</a>
                    <a href="#equipamentos" class="nav-link font-medium px-3 py-2 rounded-md">Equipamentos</a>
                    <a href="#protocolos" class="nav-link font-medium px-3 py-2 rounded-md">Protocolos</a>
                    <a href="#seguranca" class="nav-link font-medium px-3 py-2 rounded-md">Segurança</a>
                    <a href="#pratica" class="nav-link font-medium px-3 py-2 rounded-md">Prática</a>
                    <a href="#ferramentas" class="nav-link font-medium px-3 py-2 rounded-md">Ferramentas</a>
                    <a href="#laboratorio" class="nav-link font-medium px-3 py-2 rounded-md text-amber-600 dark:text-amber-400">Laboratório</a>
                    <a href="#avancado" class="nav-link font-medium px-3 py-2 rounded-md">Avançado</a>
                    <a href="#biblioteca" class="nav-link font-medium px-3 py-2 rounded-md">Biblioteca</a>
                    <a href="#tendencias" class="nav-link font-medium px-3 py-2 rounded-md">Tendências</a>
                </div>

                <!-- Controls (pushed to the right) -->
                <div class="flex items-center ml-auto">
                    <button id="theme-toggle" class="hidden md:block p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors">
                        <!-- Icons will be injected by JS -->
                    </button>
                    <div class="md:hidden flex items-center">
                         <button id="theme-toggle-mobile" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-800 transition-colors mr-2">
                            <!-- Icons will be injected by JS -->
                        </button>
                        <button id="mobile-menu-button" class="text-slate-600 dark:text-slate-300 hover:text-accent-color dark:hover:text-accent-color focus:outline-none">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                        </button>
                    </div>
                </div>
            </div>
            <div id="mobile-menu" class="hidden md:hidden pb-4">
                <a href="#fundamentos" class="block py-2 px-4 text-sm nav-link">Fundamentos</a>
                <a href="#equipamentos" class="block py-2 px-4 text-sm nav-link">Equipamentos</a>
                <a href="#protocolos" class="block py-2 px-4 text-sm nav-link">Protocolos</a>
                <a href="#seguranca" class="block py-2 px-4 text-sm nav-link">Segurança</a>
                <a href="#pratica" class="block py-2 px-4 text-sm nav-link">Prática</a>
                <a href="#ferramentas" class="block py-2 px-4 text-sm nav-link">Ferramentas</a>
                <a href="#laboratorio" class="block py-2 px-4 text-sm nav-link text-amber-600 dark:text-amber-400">Laboratório</a>
                <a href="#avancado" class="block py-2 px-4 text-sm nav-link">Avançado</a>
                <a href="#biblioteca" class="block py-2 px-4 text-sm nav-link">Biblioteca</a>
                <a href="#tendencias" class="block py-2 px-4 text-sm nav-link">Tendências</a>
            </div>
        </nav>
    </header>

    <div class="container mx-auto px-4 sm:px-6 lg:px-8 flex">
        <aside class="hidden lg:block w-64 sticky top-24 self-start pr-8">
            <nav id="side-nav" class="flex flex-col space-y-1 text-sm">
                <!-- Side nav links will be injected by JS -->
            </nav>
        </aside>

        <main class="flex-1 py-12 md:py-16">

            <section id="intro" class="text-center mb-24">
                <h2 class="text-4xl md:text-5xl font-extrabold mb-4 tracking-tighter">Manual Interativo de Redes</h2>
                <p class="max-w-3xl mx-auto text-lg secondary">
                    Explore os conceitos complexos de redes de computadores de forma visual e interativa. Este guia foi projetado para ajudar estudantes e profissionais a dominar os fundamentos e as tecnologias que moldam o mundo digital.
                </p>
            </section>

            <section id="fundamentos" class="mb-24 scroll-mt-24">
                <h3 class="text-3xl font-bold mb-3 tracking-tight">Fundamentos de Redes</h3>
                <p class="mb-10 max-w-prose secondary">
                    Toda grande infraestrutura começa com uma base sólida. Esta seção desmistifica os conceitos essenciais que governam a comunicação digital, desde como as redes são classificadas por tamanho até os modelos teóricos que padronizam a troca de informações.
                </p>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-3">Tipos de Rede</h4>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-start"><span class="text-blue-500 mr-3 mt-1">●</span><div><strong>LAN:</strong> Rede local em um escritório ou edifício.</div></li>
                            <li class="flex items-start"><span class="text-blue-500 mr-3 mt-1">●</span><div><strong>WAN:</strong> Conecta redes em vastas áreas geográficas.</div></li>
                            <li class="flex items-start"><span class="text-blue-500 mr-3 mt-1">●</span><div><strong>WLAN:</strong> Uma LAN sem fios (Wi-Fi).</div></li>
                            <li class="flex items-start"><span class="text-blue-500 mr-3 mt-1">●</span><div><strong>MAN:</strong> Cobre uma área metropolitana.</div></li>
                            <li class="flex items-start"><span class="text-blue-500 mr-3 mt-1">●</span><div><strong>PAN:</strong> Rede de curtíssimo alcance (Bluetooth).</div></li>
                            <li class="flex items-start"><span class="text-blue-500 mr-3 mt-1">●</span><div><strong>SAN:</strong> Rede de alta performance para armazenamento.</div></li>
                        </ul>
                    </div>
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-3">Topologias de Rede</h4>
                         <ul class="space-y-2 text-sm">
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">●</span><div><strong>Estrela:</strong> Ponto central (switch). Padrão moderno.</div></li>
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">●</span><div><strong>Malha:</strong> Alta redundância, múltiplos caminhos.</div></li>
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">●</span><div><strong>Barramento:</strong> Cabo central único. Obsoleta.</div></li>
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">●</span><div><strong>Anel:</strong> Circuito fechado. Obsoleta.</div></li>
                            <li class="flex items-start"><span class="text-green-500 mr-3 mt-1">●</span><div><strong>Híbrida:</strong> Combinação de topologias.</div></li>
                        </ul>
                    </div>
                    <div class="card p-6 rounded-xl md:col-span-2 lg:col-span-1">
                        <h4 class="font-semibold text-lg mb-3">Meios de Transmissão</h4>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-start"><span class="text-purple-500 mr-3 mt-1">●</span><div><strong>Par Trançado:</strong> Cabo de cobre padrão para LANs.</div></li>
                            <li class="flex items-start"><span class="text-purple-500 mr-3 mt-1">●</span><div><strong>Fibra Óptica:</strong> Transmissão via luz. Alta velocidade.</div></li>
                            <li class="flex items-start"><span class="text-purple-500 mr-3 mt-1">●</span><div><strong>Wireless:</strong> Ondas de rádio (Wi-Fi). Mobilidade.</div></li>
                            <li class="flex items-start"><span class="text-purple-500 mr-3 mt-1">●</span><div><strong>Cabo Coaxial:</strong> Usado em TV a cabo/internet.</div></li>
                        </ul>
                    </div>
                </div>
                <div class="mt-12 card p-8 rounded-xl">
                    <h4 class="font-bold text-xl mb-4 text-center">Modelos OSI vs. TCP/IP</h4>
                    <p class="text-center mb-8 max-w-2xl mx-auto secondary">Passe o mouse sobre as camadas para ver os detalhes de cada modelo de comunicação.</p>
                    <div class="flex flex-col md:flex-row justify-center gap-8">
                        <div id="osi-model" class="w-full md:w-1/2">
                            <h5 class="font-semibold text-center mb-2">Modelo OSI (7 Camadas)</h5>
                            <div class="space-y-1"></div>
                        </div>
                        <div id="tcpip-model" class="w-full md:w-1/2">
                            <h5 class="font-semibold text-center mb-2">Modelo TCP/IP (4 Camadas)</h5>
                            <div class="space-y-1"></div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="equipamentos" class="mb-24 scroll-mt-24">
                <h3 class="text-3xl font-bold mb-3 tracking-tight">Equipamentos e Hardware</h3>
                <p class="mb-10 max-w-prose secondary">Conheça os componentes físicos que dão vida a uma rede. Cada dispositivo tem um papel crucial na infraestrutura.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">Hub vs. Switch vs. Roteador</h4>
                        <p class="text-sm secondary mt-2"><strong>Hub (Camada 1):</strong> Repete o sinal para todos. Ineficiente.</p>
                        <p class="text-sm secondary mt-2"><strong>Switch (Camada 2):</strong> Encaminha dados para o destino correto (MAC).</p>
                        <p class="text-sm secondary mt-2"><strong>Roteador (Camada 3):</strong> Conecta redes diferentes (IP).</p>
                    </div>
                     <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">Outros Dispositivos Essenciais</h4>
                        <p class="text-sm secondary mt-2"><strong>Access Point:</strong> Cria uma rede sem fio (WLAN).</p>
                        <p class="text-sm secondary mt-2"><strong>Firewall:</strong> Barreira de segurança que filtra o tráfego.</p>
                        <p class="text-sm secondary mt-2"><strong>Modem:</strong> Converte o sinal do provedor de internet.</p>
                    </div>
                     <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">Power over Ethernet (PoE)</h4>
                        <p class="text-sm secondary mt-2">Permite que cabos de rede transmitam energia elétrica, ideal para alimentar dispositivos como câmeras e APs.</p>
                    </div>
                </div>
            </section>

            <section id="protocolos" class="mb-24 scroll-mt-24">
                <h3 class="text-3xl font-bold mb-3 tracking-tight">Protocolos e Endereçamento</h3>
                <p class="mb-10 max-w-prose secondary">Explore a lógica por trás da comunicação: endereços IP que identificam cada dispositivo e os protocolos que garantem a entrega dos dados.</p>
                <div class="grid md:grid-cols-2 gap-6 mb-6">
                    <div class="card p-6 rounded-xl">
                         <h4 class="font-semibold text-lg mb-4 text-center">IPv4 vs. IPv6</h4>
                         <p class="text-sm mb-4 secondary">O IPv4 (32 bits) está esgotado. O IPv6 (128 bits) oferece um número quase infinito de endereços, sendo a solução para o crescimento da Internet.</p>
                         <div class="chart-container h-64 md:h-80">
                             <canvas id="ipVersionChart"></canvas>
                         </div>
                    </div>
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">Conceitos de Endereçamento</h4>
                        <ul class="space-y-3 text-sm secondary">
                            <li><strong>Subnetting:</strong> Dividir uma rede grande em redes menores.</li>
                            <li><strong>Máscara/CIDR:</strong> Define a porção de rede e de hosts de um IP.</li>
                            <li><strong>IP Público vs. Privado:</strong> IPs públicos são únicos na Internet; privados são para redes locais.</li>
                            <li><strong>DHCP vs. Estático:</strong> DHCP atribui IPs automaticamente; estático é fixo.</li>
                        </ul>
                    </div>
                </div>
                <div class="card p-6 rounded-xl">
                    <h4 class="font-semibold text-lg mb-4">Protocolos de Comunicação Comuns</h4>
                    <input type="text" id="protocol-search" placeholder="Pesquisar por protocolo (ex: HTTP, DNS)..." class="form-input mb-4">
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="bg-slate-100 dark:bg-slate-800/50">
                                <tr>
                                    <th class="p-3 font-semibold">Protocolo</th>
                                    <th class="p-3 font-semibold">Porta Padrão</th>
                                    <th class="p-3 font-semibold">Tipo</th>
                                    <th class="p-3 font-semibold hidden md:table-cell">Função</th>
                                </tr>
                            </thead>
                            <tbody id="protocol-table"></tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="seguranca" class="mb-24 scroll-mt-24">
                <h3 class="text-3xl font-bold mb-3 tracking-tight">Segurança de Redes</h3>
                <p class="mb-10 max-w-prose secondary">Proteger uma rede é tão importante quanto construí-la. Explore as ferramentas e estratégias para defender a infraestrutura contra ameaças.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">Firewall & IPS</h4>
                        <p class="text-sm secondary"><strong>Firewall:</strong> Filtra o tráfego. <strong>IDS:</strong> Detecta ameaças. <strong>IPS:</strong> Previne ameaças ativamente.</p>
                    </div>
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">VPN & Criptografia</h4>
                        <p class="text-sm secondary"><strong>VPN:</strong> Cria um "túnel" seguro e criptografado sobre uma rede pública, garantindo acesso remoto seguro.</p>
                    </div>
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">VLAN & Segmentação</h4>
                        <p class="text-sm secondary"><strong>VLAN:</strong> Divide um switch físico em múltiplas redes lógicas isoladas, melhorando segurança e performance.</p>
                    </div>
                </div>
            </section>

            <section id="pratica" class="mb-24 scroll-mt-24">
                <h3 class="text-3xl font-bold mb-3 tracking-tight">Configuração e Prática</h3>
                <p class="mb-10 max-w-prose secondary">A teoria ganha vida na prática. Esta seção fornece exemplos de comandos para tarefas essenciais e ferramentas de diagnóstico.</p>
                <div class="grid lg:grid-cols-2 gap-6">
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-3">Configuração de IP (Windows via CMD)</h4>
                        <div class="code-block text-xs">
                            <p>> netsh interface ipv4 set address name="Ethernet0" static 192.168.1.100 255.255.255.0 192.168.1.1</p>
                        </div>
                    </div>
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-3">Criação de VLAN (Cisco IOS)</h4>
                        <div class="code-block text-xs">
                            <p>Switch(config)# vlan 10</p>
                            <p>Switch(config-vlan)# name VENDAS</p>
                            <p>Switch(config-if)# switchport access vlan 10</p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="ferramentas" class="mb-24 scroll-mt-24">
                <h3 class="text-3xl font-bold mb-3 tracking-tight">Ferramentas Interativas</h3>
                <p class="mb-10 max-w-prose secondary">Utilize estas ferramentas para aplicar e testar seus conhecimentos de rede de forma prática.</p>
                <div class="card p-8 rounded-xl">
                    <div class="border-b border-border-color mb-6">
                        <div class="flex items-center space-x-4">
                            <button id="tab-ipv4" class="tab-btn active">Calculadora IPv4</button>
                            <button id="tab-ipv6" class="tab-btn">Calculadora IPv6</button>
                        </div>
                    </div>
                    
                    <!-- Calculadora IPv4 -->
                    <div id="calculator-ipv4">
                        <!-- Content will be generated by JS -->
                    </div>

                    <!-- Calculadora IPv6 -->
                    <div id="calculator-ipv6" class="hidden">
                        <!-- Content will be generated by JS -->
                    </div>
                </div>
            </section>

            <section id="laboratorio" class="mb-24 scroll-mt-24">
                <h3 class="text-3xl font-bold mb-3 tracking-tight">Laboratório de Diagnóstico Interativo</h3>
                <p class="mb-10 max-w-prose secondary">Aprenda a diagnosticar problemas de rede em um ambiente simulado. Siga os passos, execute os comandos e escolha a melhor ação para resolver o cenário.</p>
                <div class="card p-8 rounded-xl">
                    <div id="lab-container">
                        <h4 id="lab-title" class="font-semibold text-lg mb-2"></h4>
                        <p id="lab-scenario" class="text-sm mb-4 secondary"></p>
                        <div class="terminal" id="lab-output"></div>
                        <div id="lab-commands" class="mt-4 flex flex-wrap gap-2"></div>
                        <div id="lab-choices" class="mt-4 space-y-2"></div>
                        <div id="lab-feedback" class="mt-4 p-4 rounded-md text-sm hidden"></div>
                    </div>
                </div>
            </section>

            <section id="avancado" class="mb-24 scroll-mt-24">
                <h3 class="text-3xl font-bold mb-3 tracking-tight">Recursos Avançados</h3>
                <p class="mb-10 max-w-prose secondary">Aprofunde seus conhecimentos com estudos de caso e materiais de preparação para certificações do setor.</p>
                <div class="space-y-6">
                    <div class="card p-8 rounded-xl">
                        <h4 class="font-semibold text-lg mb-4">Casos de Estudo</h4>
                        <div class="space-y-6">
                            <div>
                                <h5 class="font-semibold mb-2">Cenário 1: Pequeno Escritório (15 funcionários)</h5>
                                <ul class="list-disc list-inside text-sm space-y-1 secondary">
                                    <li><strong>Requisitos:</strong> Acesso à internet, compartilhamento de arquivos/impressora, Wi-Fi seguro para funcionários e uma rede separada para convidados.</li>
                                    <li><strong>Solução Proposta:</strong>
                                        <ul class="list-circle list-inside ml-4 mt-1">
                                            <li>1x Roteador/Firewall de borda.</li>
                                            <li>1x Switch gerenciável de 24 portas com suporte a PoE.</li>
                                            <li>2x Access Points Wi-Fi 6 com alimentação PoE.</li>
                                            <li><strong>Configuração Chave:</strong> Criar duas VLANs: VLAN 10 (Interna) e VLAN 99 (Convidados). Aplicar regras de firewall para isolar a VLAN de convidados da rede interna.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                            <div class="border-t border-border-color my-6"></div>
                            <div>
                                <h5 class="font-semibold mb-2">Cenário 2: Rede Corporativa Média (200 funcionários, 2 andares)</h5>
                                <ul class="list-disc list-inside text-sm space-y-1 secondary">
                                    <li><strong>Requisitos:</strong> Alta disponibilidade, segmentação por departamento (Vendas, RH, TI), suporte a VoIP com qualidade, cobertura Wi-Fi completa com roaming.</li>
                                    <li><strong>Solução Proposta:</strong>
                                        <ul class="list-circle list-inside ml-4 mt-1">
                                            <li>Design hierárquico: Switches de acesso em cada andar e um par de switches de distribuição/core em alta disponibilidade (HA).</li>
                                            <li>Links de fibra óptica redundantes entre os switches de acesso e distribuição.</li>
                                            <li>Múltiplas VLANs para cada departamento e uma VLAN dedicada para Voz (com QoS para priorizar tráfego de VoIP).</li>
                                            <li>Múltiplos APs gerenciados por um controlador WLAN para gerenciar roaming e políticas centralizadas.</li>
                                            <li>Firewall de Próxima Geração (NGFW) no perímetro da rede.</li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card p-8 rounded-xl">
                        <h4 class="font-semibold text-lg mb-4">Preparação para Certificação</h4>
                        <div class="space-y-4 text-sm">
                            <div>
                                <h5 class="font-semibold">CompTIA Network+</h5>
                                <p class="secondary">Certificação fundamental e neutra em relação a fornecedores. Valida o conhecimento essencial em topologias, protocolos, segurança e troubleshooting de redes. Ideal para quem está começando.</p>
                            </div>
                            <div>
                                <h5 class="font-semibold">Cisco CCNA (Cisco Certified Network Associate)</h5>
                                <p class="secondary">Uma das certificações mais reconhecidas da indústria. Foca na instalação, configuração e operação de redes de pequeno e médio porte, com ênfase em produtos e soluções da Cisco.</p>
                            </div>
                            <div>
                                <h5 class="font-semibold">Cisco CCNP (Cisco Certified Network Professional)</h5>
                                <p class="secondary">Certificação de nível profissional que exige um conhecimento mais profundo. Possui trilhas de especialização, como Enterprise, Security e Data Center, validando habilidades avançadas em planejamento, implementação e troubleshooting de redes complexas.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="biblioteca" class="mb-24 scroll-mt-24">
                <h3 class="text-3xl font-bold mb-3 tracking-tight">Biblioteca de Referência Rápida</h3>
                <p class="mb-10 max-w-prose secondary">Uma coleção de informações práticas, comandos e scripts para auxiliar no diagnóstico e automação de tarefas de rede no dia a dia.</p>
                <div class="space-y-8">
                    <div class="card p-8 rounded-xl">
                        <h4 class="font-semibold text-lg mb-4">Problemas Comuns e Soluções</h4>
                        <div class="space-y-6">
                            <div>
                                <h5 class="font-semibold mb-2">Problema: Sem Conectividade com a Internet</h5>
                                <ol class="list-decimal list-inside text-sm space-y-2 secondary">
                                    <li><strong>Verificar IP local:</strong> Use `ipconfig` (Windows) ou `ip addr` (Linux) para ver se o computador tem um endereço IP válido (não um APIPA 169.254.x.x).</li>
                                    <li><strong>Testar Gateway:</strong> Use `ping [endereço do gateway]` para verificar a conectividade com o roteador local. Se falhar, o problema é na rede local (cabo, switch, Wi-Fi).</li>
                                    <li><strong>Testar DNS:</strong> Use `ping 8.8.8.8` para testar a conectividade com um IP externo. Se funcionar, mas `ping www.google.com` não, o problema é de DNS.</li>
                                    <li><strong>Verificar Rota:</strong> Use `tracert 8.8.8.8` para ver em qual ponto da rota a conexão está falhando.</li>
                                </ol>
                            </div>
                            <div class="border-t border-border-color my-6"></div>
                            <div>
                                <h5 class="font-semibold mb-2">Problema: Lentidão na Rede</h5>
                                <ol class="list-decimal list-inside text-sm space-y-2 secondary">
                                    <li><strong>Verificar Latência e Perda:</strong> Use `ping -t [destino]` para monitorar a latência e a perda de pacotes ao longo do tempo. Picos de latência ou perda de pacotes indicam instabilidade.</li>
                                    <li><strong>Identificar Gargalos:</strong> Use `tracert [destino]` para identificar se algum salto específico na rota está com latência alta.</li>
                                    <li><strong>Verificar Utilização da Banda:</strong> Acesse a interface do roteador ou use ferramentas de monitoramento para verificar se o link de internet está saturado.</li>
                                    <li><strong>Analisar Tráfego Local:</strong> Use o Wireshark para procurar por broadcast storms ou tráfego excessivo que possa estar congestionando a rede local.</li>
                                </ol>
                            </div>
                             <div class="border-t border-border-color my-6"></div>
                            <div>
                                <h5 class="font-semibold mb-2">Problema: Falha de Resolução de Nomes (DNS)</h5>
                                <ol class="list-decimal list-inside text-sm space-y-2 secondary">
                                    <li><strong>Usar `nslookup`:</strong> Execute `nslookup www.google.com`. Se retornar um erro, o DNS não está funcionando.</li>
                                    <li><strong>Verificar Servidores DNS:</strong> Use `ipconfig /all` para ver quais servidores DNS estão configurados. Tente pingar os endereços IP desses servidores.</li>
                                    <li><strong>Limpar Cache DNS:</strong> Use `ipconfig /flushdns` (Windows) para limpar o cache de DNS local, que pode estar corrompido.</li>
                                    <li><strong>Testar com DNS Público:</strong> Configure manualmente um DNS público (como 8.8.8.8 do Google) para ver se o problema é com o servidor DNS do seu provedor.</li>
                                </ol>
                            </div>
                        </div>
                    </div>
                    <div class="card p-8 rounded-xl">
                        <h4 class="font-semibold text-lg mb-4">Scripts Python Essenciais para Automação e Testes</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm">
                                <thead class="bg-slate-100 dark:bg-slate-800/50">
                                    <tr>
                                        <th class="p-3 font-semibold text-left">Função</th>
                                        <th class="p-3 font-semibold text-left">Código Python</th>
                                        <th class="p-3 font-semibold text-left">Bibliotecas</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-border-color">
                                    <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                        <td class="p-3 align-top"><strong>Verificar Conectividade (Ping)</strong><p class="text-xs secondary mt-1">Testa se uma lista de hosts está online.</p></td>
                                        <td class="p-3"><div class="code-block text-xs"><pre><code>import os

hosts = ['8.8.8.8', '192.168.1.1', 'google.com']
for host in hosts:
    response = os.system(f"ping -c 1 {host}")
    if response == 0:
        print(f"{host} está online")
    else:
        print(f"{host} está offline")</code></pre></div></td>
                                        <td class="p-3 align-top font-mono text-xs">os</td>
                                    </tr>
                                    <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                        <td class="p-3 align-top"><strong>Scanner de Portas Abertas</strong><p class="text-xs secondary mt-1">Verifica se portas comuns estão abertas em um host.</p></td>
                                        <td class="p-3"><div class="code-block text-xs"><pre><code>import socket

target = '127.0.0.1'
ports = [22, 80, 443, 3389]
for port in ports:
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.settimeout(1)
    result = sock.connect_ex((target, port))
    if result == 0:
        print(f"Porta {port} está aberta")
    sock.close()</code></pre></div></td>
                                        <td class="p-3 align-top font-mono text-xs">socket</td>
                                    </tr>
                                    <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                        <td class="p-3 align-top"><strong>Resolver Nome de Domínio</strong><p class="text-xs secondary mt-1">Obtém o endereço IP de um hostname.</p></td>
                                        <td class="p-3"><div class="code-block text-xs"><pre><code>import socket

hostname = 'www.google.com'
try:
    ip_address = socket.gethostbyname(hostname)
    print(f"O IP de {hostname} é {ip_address}")
except socket.gaierror:
    print(f"Não foi possível resolver {hostname}")</code></pre></div></td>
                                        <td class="p-3 align-top font-mono text-xs">socket</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="tendencias" class="scroll-mt-24">
                 <h3 class="text-3xl font-bold mb-3 tracking-tight">Tendências e Novas Tecnologias</h3>
                 <p class="mb-10 max-w-prose secondary">Fique por dentro das tecnologias que estão moldando o futuro da conectividade.</p>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">5G & Wi-Fi 6/6E</h4>
                        <p class="text-sm secondary">Conectividade sem fio de altíssima velocidade, baixa latência e maior eficiência.</p>
                    </div>
                     <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">IoT & Edge Computing</h4>
                        <p class="text-sm secondary">Processamento de dados na borda da rede para respostas mais rápidas.</p>
                    </div>
                     <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">SDN & Automação</h4>
                        <p class="text-sm secondary">Redes definidas por software, permitindo gerenciamento centralizado e automação.</p>
                    </div>
                     <div class="card p-6 rounded-xl">
                        <h4 class="font-semibold text-lg mb-2">Segurança Zero Trust</h4>
                        <p class="text-sm secondary">Modelo de segurança que não confia em ninguém por padrão, verificando tudo.</p>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <footer class="text-slate-500 mt-24">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 text-center text-sm border-t border-border-color">
            <div class="space-y-2">
                <p><strong>Autor:</strong> Carlos Antonio De Oliveira Piquet</p>
                <p><strong>Contato:</strong> <a href="mailto:carlospiquet.projetos@hotmail.com" class="text-accent-color hover:underline">carlospiquet.projetos@hotmail.com</a></p>
                <p class="mt-4 text-xs text-text-color-light">
                    © 2025 Carlos Antonio De Oliveira Piquet. Todos os direitos reservados.<br>
                    Este projeto é distribuído sob a Licença MIT.
                </p>
            </div>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', function () {
    // --- Theme Toggle ---
    const themeToggle = document.getElementById('theme-toggle');
    const themeToggleMobile = document.getElementById('theme-toggle-mobile');
    const sunIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>`;
    const moonIcon = `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>`;
    
    const applyTheme = (isDark) => {
        if (isDark) {
            document.documentElement.classList.add('dark');
            themeToggle.innerHTML = sunIcon;
            themeToggleMobile.innerHTML = sunIcon;
        } else {
            document.documentElement.classList.remove('dark');
            themeToggle.innerHTML = moonIcon;
            themeToggleMobile.innerHTML = moonIcon;
        }
    };

    const toggleTheme = () => {
        const isDark = document.documentElement.classList.toggle('dark');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        applyTheme(isDark);
    };

    themeToggle.addEventListener('click', toggleTheme);
    themeToggleMobile.addEventListener('click', toggleTheme);

    const savedTheme = localStorage.getItem('theme');
    applyTheme(savedTheme === 'dark' || (savedTheme === null && window.matchMedia('(prefers-color-scheme: dark)').matches));

    // --- Mobile Menu ---
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // --- OSI & TCP/IP Models ---
    const osiData = [
        { name: '7. Aplicação', pdu: 'Dados', func: 'Interface para aplicações (HTTP, FTP)', color: 'bg-red-500' },
        { name: '6. Apresentação', pdu: 'Dados', func: 'Formatação, criptografia, compressão', color: 'bg-orange-500' },
        { name: '5. Sessão', pdu: 'Dados', func: 'Gerenciamento de sessões', color: 'bg-yellow-500 text-slate-800' },
        { name: '4. Transporte', pdu: 'Segmento/Datagrama', func: 'Conectividade ponta a ponta (TCP, UDP)', color: 'bg-green-500' },
        { name: '3. Rede', pdu: 'Pacote', func: 'Endereçamento lógico e roteamento (IP)', color: 'bg-blue-500' },
        { name: '2. Enlace', pdu: 'Quadro', func: 'Endereçamento físico (MAC)', color: 'bg-indigo-500' },
        { name: '1. Física', pdu: 'Bit', func: 'Transmissão de bits no meio', color: 'bg-violet-500' }
    ];
    const tcpIpData = [
        { name: 'Aplicação', mapsTo: 'Aplicação, Apresentação, Sessão', color: 'bg-red-500' },
        { name: 'Transporte', mapsTo: 'Transporte', color: 'bg-green-500' },
        { name: 'Internet', mapsTo: 'Rede', color: 'bg-blue-500' },
        { name: 'Acesso à Rede', mapsTo: 'Enlace, Física', color: 'bg-indigo-500' }
    ];
    const osiContainer = document.getElementById('osi-model').querySelector('.space-y-1');
    osiData.forEach(layer => {
        const div = document.createElement('div');
        div.className = `group relative p-3 ${layer.color} ${layer.name.includes('Sessão') ? 'text-slate-800' : 'text-white'} rounded-md text-center font-medium cursor-pointer`;
        div.textContent = layer.name;
        const info = document.createElement('div');
        info.className = 'card osi-layer-info absolute left-full top-0 ml-4 w-64 p-4 rounded-lg shadow-xl z-10 opacity-0 transform -translate-x-4 pointer-events-none';
        info.innerHTML = `<p class="font-bold">${layer.name}</p><p class="text-sm mt-1"><strong>Função:</strong> ${layer.func}</p><p class="text-sm mt-1"><strong>PDU:</strong> ${layer.pdu}</p>`;
        div.appendChild(info);
        osiContainer.appendChild(div);
    });
    const tcpIpContainer = document.getElementById('tcpip-model').querySelector('.space-y-1');
    tcpIpData.forEach(layer => {
        const div = document.createElement('div');
        div.className = `group relative p-3 ${layer.color} text-white rounded-md text-center font-medium cursor-pointer`;
        div.textContent = layer.name;
        const info = document.createElement('div');
        info.className = 'card osi-layer-info absolute right-full top-0 mr-4 w-64 p-4 rounded-lg shadow-xl z-10 opacity-0 transform translate-x-4 pointer-events-none';
        info.innerHTML = `<p class="font-bold">${layer.name}</p><p class="text-sm mt-1"><strong>Mapeia para OSI:</strong> ${layer.mapsTo}</p>`;
        div.appendChild(info);
        tcpIpContainer.appendChild(div);
    });

    // --- IP Version Chart ---
    const ipCtx = document.getElementById('ipVersionChart').getContext('2d');
    new Chart(ipCtx, {
        type: 'bar',
        data: {
            labels: ['IPv4 (32-bit)', 'IPv6 (128-bit)'],
            datasets: [{
                label: 'Número de Endereços',
                data: [32, 128],
                backgroundColor: ['#3b82f6', '#10b981'],
                borderWidth: 0
            }]
        },
        options: {
            indexAxis: 'y', responsive: true, maintainAspectRatio: false,
            scales: { x: { type: 'logarithmic', title: { display: true, text: 'Bits de Endereço (Escala Log)' } } },
            plugins: {
                legend: { display: false },
                tooltip: {
                    callbacks: {
                        label: (context) => context.chart.data.labels[context.dataIndex] === 'IPv4 (32-bit)' ? '~4.3 Bilhões de endereços' : '~340 Undecilhões de endereços'
                    }
                }
            }
        }
    });

    // --- Protocol Table ---
    const protocolData = [
        { name: 'FTP', port: '20, 21', type: 'TCP', func: 'Transferência de arquivos' }, { name: 'SSH', port: '22', type: 'TCP', func: 'Acesso remoto seguro' },
        { name: 'Telnet', port: '23', type: 'TCP', func: 'Acesso remoto não seguro' }, { name: 'SMTP', port: '25', type: 'TCP', func: 'Envio de e-mail' },
        { name: 'DNS', port: '53', type: 'UDP/TCP', func: 'Resolução de nomes de domínio' }, { name: 'DHCP', port: '67, 68', type: 'UDP', func: 'Atribuição dinâmica de IP' },
        { name: 'HTTP', port: '80', type: 'TCP', func: 'Navegação na Web' }, { name: 'POP3', port: '110', type: 'TCP', func: 'Recebimento de e-mail' },
        { name: 'IMAP', port: '143', type: 'TCP', func: 'Recebimento de e-mail (sincronizado)' }, { name: 'SNMP', port: '161, 162', type: 'UDP', func: 'Gerenciamento de rede' },
        { name: 'HTTPS', port: '443', type: 'TCP', func: 'Navegação na Web segura' }, { name: 'RDP', port: '3389', type: 'TCP', func: 'Área de Trabalho Remota (Windows)' },
    ];
    const protocolTableBody = document.getElementById('protocol-table');
    const protocolSearchInput = document.getElementById('protocol-search');
    function renderProtocols(filter = '') {
        if (!protocolTableBody) return;
        protocolTableBody.innerHTML = '';
        const filteredData = protocolData.filter(p => p.name.toLowerCase().includes(filter.toLowerCase()));
        if (filteredData.length === 0) {
            protocolTableBody.innerHTML = `<tr><td colspan="4" class="text-center p-4 secondary">Nenhum protocolo encontrado.</td></tr>`;
            return;
        }
        filteredData.forEach(p => {
            const row = document.createElement('tr');
            row.className = 'border-b border-border-color hover:bg-slate-50 dark:hover:bg-slate-800/50';
            row.innerHTML = `<td class="p-3 font-medium">${p.name}</td><td class="p-3">${p.port}</td><td class="p-3">${p.type}</td><td class="p-3 hidden md:table-cell secondary">${p.func}</td>`;
            protocolTableBody.appendChild(row);
        });
    }
    if (protocolSearchInput) {
        protocolSearchInput.addEventListener('input', (e) => renderProtocols(e.target.value));
        renderProtocols();
    }
    
    // --- Scroll Spy & Side Nav ---
    const mainNavLinks = document.querySelectorAll('header nav a.nav-link');
    const sideNavContainer = document.getElementById('side-nav');
    const sections = document.querySelectorAll('main section');
    
    if (sideNavContainer) {
        sideNavContainer.innerHTML = '';
        sections.forEach(section => {
            const titleEl = section.querySelector('h3, h2');
            if (titleEl) {
                const title = titleEl.textContent;
                const id = section.getAttribute('id');
                if(id !== 'intro'){
                    const link = document.createElement('a');
                    link.href = `#${id}`;
                    link.textContent = title;
                    link.className = 'nav-link side-nav-link px-3 py-2 rounded-md text-sm';
                    sideNavContainer.appendChild(link);
                }
            }
        });
    }

    const sideNavLinks = document.querySelectorAll('.side-nav-link');
    const allNavLinks = [...mainNavLinks, ...sideNavLinks];

    window.addEventListener('scroll', () => {
        let current = '';
        sections.forEach(section => {
            const sectionTop = section.offsetTop;
            if (pageYOffset >= sectionTop - 120) {
                current = section.getAttribute('id');
            }
        });

        allNavLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href').includes(current)) {
                link.classList.add('active');
            }
        });
    });

    // --- Calculators ---
    const tabIPv4 = document.getElementById('tab-ipv4');
    const tabIPv6 = document.getElementById('tab-ipv6');
    const calculatorIPv4 = document.getElementById('calculator-ipv4');
    const calculatorIPv6 = document.getElementById('calculator-ipv6');

    tabIPv4.addEventListener('click', () => {
        tabIPv4.classList.add('active');
        tabIPv6.classList.remove('active');
        calculatorIPv4.classList.remove('hidden');
        calculatorIPv6.classList.add('hidden');
    });

    tabIPv6.addEventListener('click', () => {
        tabIPv6.classList.add('active');
        tabIPv4.classList.remove('active');
        calculatorIPv6.classList.remove('hidden');
        calculatorIPv4.classList.add('hidden');
    });

    // --- IPv4 Calculator ---
    const ipv4CalculatorHTML = `
        <div class="grid md:grid-cols-2 gap-6 mb-8">
            <div class="space-y-4">
                <div>
                    <label class="block text-sm font-semibold mb-2">Endereço IP</label>
                    <input type="text" id="ipv4-ip" value="192.168.1.10" class="form-input font-mono text-lg" placeholder="192.168.1.10">
                </div>
                <div>
                    <label class="block text-sm font-semibold mb-2">Máscara de Sub-rede (CIDR ou Decimal)</label>
                    <input type="text" id="ipv4-subnet" value="/24" class="form-input font-mono text-lg" placeholder="/24 ou 255.255.255.0">
                </div>
                <div id="ipv4-error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg hidden"></div>
            </div>
            <div class="bg-slate-100 dark:bg-slate-800/50 rounded-lg p-4">
                <h3 class="font-semibold mb-3">CIDRs Comuns</h3>
                <div id="ipv4-common-cidrs-table" class="max-h-60 overflow-y-auto"></div>
            </div>
        </div>
        <div id="ipv4-results-container" class="space-y-6"></div>
    `;
    calculatorIPv4.innerHTML = ipv4CalculatorHTML;

    const ipv4 = {
        ipInput: document.getElementById('ipv4-ip'),
        subnetInput: document.getElementById('ipv4-subnet'),
        errorDiv: document.getElementById('ipv4-error'),
        resultsContainer: document.getElementById('ipv4-results-container'),
        commonCidrsTable: document.getElementById('ipv4-common-cidrs-table'),
        
        commonCidrs: [
            { cidr: '/30', mask: '255.255.255.252', hosts: 2 }, { cidr: '/29', mask: '255.255.255.248', hosts: 6 },
            { cidr: '/28', mask: '255.255.255.240', hosts: 14 }, { cidr: '/27', mask: '255.255.255.224', hosts: 30 },
            { cidr: '/26', mask: '255.255.255.192', hosts: 62 }, { cidr: '/25', mask: '255.255.255.128', hosts: 126 },
            { cidr: '/24', mask: '255.255.255.0', hosts: 254 }, { cidr: '/23', mask: '255.255.254.0', hosts: 510 },
            { cidr: '/22', mask: '255.255.252.0', hosts: 1022 }, { cidr: '/21', mask: '255.255.248.0', hosts: 2046 },
            { cidr: '/20', mask: '255.255.240.0', hosts: 4094 }, { cidr: '/16', mask: '255.255.0.0', hosts: 65534 },
            { cidr: '/8', mask: '255.0.0.0', hosts: 16777214 }
        ],

        init() {
            this.ipInput.addEventListener('input', () => this.calculateSubnet());
            this.subnetInput.addEventListener('input', () => this.calculateSubnet());
            this.renderCommonCidrs();
            this.calculateSubnet();
        },

        renderCommonCidrs() {
            const table = document.createElement('table');
            table.className = 'w-full text-sm';
            table.innerHTML = `
                <thead class="bg-slate-200 dark:bg-slate-700 sticky top-0">
                    <tr>
                        <th class="px-2 py-1 text-left">CIDR</th>
                        <th class="px-2 py-1 text-left">Máscara</th>
                        <th class="px-2 py-1 text-left">Hosts</th>
                    </tr>
                </thead>
                <tbody></tbody>
            `;
            const tbody = table.querySelector('tbody');
            this.commonCidrs.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-blue-100 dark:hover:bg-blue-900/50 cursor-pointer';
                row.innerHTML = `
                    <td class="px-2 py-1 font-mono text-accent-color">${item.cidr}</td>
                    <td class="px-2 py-1 font-mono text-xs">${item.mask}</td>
                    <td class="px-2 py-1">${item.hosts.toLocaleString()}</td>
                `;
                row.addEventListener('click', () => {
                    this.subnetInput.value = item.cidr;
                    this.calculateSubnet();
                });
                tbody.appendChild(row);
            });
            this.commonCidrsTable.appendChild(table);
        },

        cidrToMask: (cidr) => {
            const bits = parseInt(cidr.replace('/', ''));
            if (bits < 0 || bits > 32) return null;
            const mask = [];
            for (let i = 0; i < 4; i++) {
                const octetBits = Math.min(8, Math.max(0, bits - i * 8));
                mask.push(256 - Math.pow(2, 8 - octetBits));
            }
            return mask.join('.');
        },
        maskToCidr: (mask) => {
            const octets = mask.split('.').map(Number);
            let bits = 0;
            for (const octet of octets) {
                bits += octet.toString(2).split('1').length - 1;
            }
            return `/${bits}`;
        },
        ipToBinary: (ip) => ip.split('.').map(octet => parseInt(octet).toString(2).padStart(8, '0')).join('.'),
        bitwiseAnd: (ip1, ip2) => ip1.split('.').map(Number).map((octet, i) => octet & ip2.split('.').map(Number)[i]).join('.'),
        bitwiseOr: (ip1, ip2) => ip1.split('.').map(Number).map((octet, i) => octet | ip2.split('.').map(Number)[i]).join('.'),
        incrementIp: (ip) => {
            let long = ip.split('.').reduce((acc, octet) => (acc << 8) + parseInt(octet), 0) + 1;
            return [(long >>> 24) & 255, (long >>> 16) & 255, (long >>> 8) & 255, long & 255].join('.');
        },
        decrementIp: (ip) => {
            let long = ip.split('.').reduce((acc, octet) => (acc << 8) + parseInt(octet), 0) - 1;
            return [(long >>> 24) & 255, (long >>> 16) & 255, (long >>> 8) & 255, long & 255].join('.');
        },
        isValidIp: (ip) => {
            const octets = ip.split('.');
            if (octets.length !== 4) return false;
            return octets.every(octet => {
                const num = parseInt(octet);
                return !isNaN(num) && num >= 0 && num <= 255 && String(num) === octet;
            });
        },

        calculateSubnet() {
            this.errorDiv.classList.add('hidden');
            const ip = this.ipInput.value;
            const subnet = this.subnetInput.value;

            if (!this.isValidIp(ip)) {
                this.errorDiv.textContent = 'Endereço IP inválido';
                this.errorDiv.classList.remove('hidden');
                this.resultsContainer.innerHTML = '';
                return;
            }

            let maskStr = '';
            let cidrStr = '';
            
            if (subnet.startsWith('/')) {
                const cidr = parseInt(subnet.replace('/', ''));
                if (isNaN(cidr) || cidr < 0 || cidr > 32) {
                    this.errorDiv.textContent = 'CIDR deve estar entre /0 e /32';
                    this.errorDiv.classList.remove('hidden');
                    this.resultsContainer.innerHTML = '';
                    return;
                }
                cidrStr = subnet;
                maskStr = this.cidrToMask(subnet);
            } else {
                if (!this.isValidIp(subnet)) {
                    this.errorDiv.textContent = 'Máscara de sub-rede inválida';
                    this.errorDiv.classList.remove('hidden');
                    this.resultsContainer.innerHTML = '';
                    return;
                }
                maskStr = subnet;
                cidrStr = this.maskToCidr(subnet);
            }

            const networkAddress = this.bitwiseAnd(ip, maskStr);
            const wildcardOctets = maskStr.split('.').map(octet => 255 - parseInt(octet));
            const wildcardMask = wildcardOctets.join('.');
            const broadcastAddress = this.bitwiseOr(networkAddress, wildcardMask);
            const firstValidIp = this.incrementIp(networkAddress);
            const lastValidIp = this.decrementIp(broadcastAddress);
            
            const hostBits = 32 - parseInt(cidrStr.replace('/', ''));
            const totalHosts = Math.pow(2, hostBits);
            const validHosts = totalHosts >= 2 ? totalHosts - 2 : 0;

            const results = {
                inputIp: ip, inputMask: maskStr, inputCidr: cidrStr, networkAddress, broadcastAddress,
                firstValidIp, lastValidIp, wildcardMask, totalHosts, validHosts, hostBits,
                networkBits: 32 - hostBits, ipBinary: this.ipToBinary(ip), maskBinary: this.ipToBinary(maskStr),
                networkBinary: this.ipToBinary(networkAddress), broadcastBinary: this.ipToBinary(broadcastAddress)
            };
            
            this.renderResults(results);
        },

        renderResults(r) {
            const ipClass = parseInt(r.inputIp.split('.')[0]) < 128 ? 'A' : parseInt(r.inputIp.split('.')[0]) < 192 ? 'B' : 'C';
            const ipType = r.inputIp.startsWith('192.168.') || r.inputIp.startsWith('10.') || (r.inputIp.startsWith('172.') && parseInt(r.inputIp.split('.')[1]) >= 16 && parseInt(r.inputIp.split('.')[1]) <= 31) ? 'Rede Privada' : 'Rede Pública';

            this.resultsContainer.innerHTML = `
                <h2 class="text-2xl font-bold border-b border-border-color pb-2">Resultados da Calculadora</h2>
                <div class="border border-border-color rounded-lg overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-slate-100 dark:bg-slate-800/50">
                            <tr>
                                <th class="px-6 py-4 text-left font-semibold">Campo</th>
                                <th class="px-6 py-4 text-left font-semibold">Valor</th>
                                <th class="px-6 py-4 text-left font-semibold hidden lg:table-cell">Binário</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-border-color">
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                <td class="px-6 py-4 font-medium">Endereço IP</td>
                                <td class="px-6 py-4 font-mono text-lg text-accent-color">${r.inputIp}</td>
                                <td class="px-6 py-4 font-mono text-xs secondary hidden lg:table-cell">${r.ipBinary}</td>
                            </tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                <td class="px-6 py-4 font-medium">Máscara de Sub-rede</td>
                                <td class="px-6 py-4 font-mono text-lg">${r.inputMask}</td>
                                <td class="px-6 py-4 font-mono text-xs secondary hidden lg:table-cell">${r.maskBinary}</td>
                            </tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                <td class="px-6 py-4 font-medium">Prefixo CIDR</td>
                                <td class="px-6 py-4 font-mono text-lg text-green-600">${r.inputCidr}</td>
                                <td class="px-6 py-4 text-sm secondary hidden lg:table-cell">${r.networkBits} bits de rede</td>
                            </tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-blue-50 dark:bg-blue-900/20">
                                <td class="px-6 py-4 font-medium">Endereço de Rede</td>
                                <td class="px-6 py-4 font-mono text-lg font-bold text-blue-700 dark:text-blue-400">${r.networkAddress}</td>
                                <td class="px-6 py-4 font-mono text-xs secondary hidden lg:table-cell">${r.networkBinary}</td>
                            </tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-red-50 dark:bg-red-900/20">
                                <td class="px-6 py-4 font-medium">Endereço de Broadcast</td>
                                <td class="px-6 py-4 font-mono text-lg font-bold text-red-700 dark:text-red-400">${r.broadcastAddress}</td>
                                <td class="px-6 py-4 font-mono text-xs secondary hidden lg:table-cell">${r.broadcastBinary}</td>
                            </tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-green-50 dark:bg-green-900/20">
                                <td class="px-6 py-4 font-medium">Primeiro IP Válido</td>
                                <td class="px-6 py-4 font-mono text-lg font-bold text-green-700 dark:text-green-400">${r.hostBits < 31 ? r.firstValidIp : 'N/A'}</td>
                                <td class="px-6 py-4 text-sm secondary hidden lg:table-cell">Host mínimo</td>
                            </tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-green-50 dark:bg-green-900/20">
                                <td class="px-6 py-4 font-medium">Último IP Válido</td>
                                <td class="px-6 py-4 font-mono text-lg font-bold text-green-700 dark:text-green-400">${r.hostBits < 31 ? r.lastValidIp : 'N/A'}</td>
                                <td class="px-6 py-4 text-sm secondary hidden lg:table-cell">Host máximo</td>
                            </tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50">
                                <td class="px-6 py-4 font-medium">Máscara Wildcard</td>
                                <td class="px-6 py-4 font-mono text-lg">${r.wildcardMask}</td>
                                <td class="px-6 py-4 text-sm secondary hidden lg:table-cell">Inverso da máscara</td>
                            </tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-yellow-50 dark:bg-yellow-900/20">
                                <td class="px-6 py-4 font-medium">Total de Endereços</td>
                                <td class="px-6 py-4 font-mono text-lg font-bold text-yellow-700 dark:text-yellow-400">${r.totalHosts.toLocaleString()}</td>
                                <td class="px-6 py-4 text-sm secondary hidden lg:table-cell">2^${r.hostBits}</td>
                            </tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-yellow-50 dark:bg-yellow-900/20">
                                <td class="px-6 py-4 font-medium">Hosts Válidos</td>
                                <td class="px-6 py-4 font-mono text-lg font-bold text-yellow-700 dark:text-yellow-400">${r.validHosts.toLocaleString()}</td>
                                <td class="px-6 py-4 text-sm secondary hidden lg:table-cell">${r.hostBits} bits de host</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="grid md:grid-cols-3 gap-4 mt-4">
                    <div class="bg-blue-100 dark:bg-blue-900/30 rounded-lg p-4">
                        <h3 class="font-semibold text-blue-800 dark:text-blue-300 mb-2">Informações da Rede</h3>
                        <div class="space-y-1 text-sm">
                            <p><span class="font-medium">Classe:</span> ${ipClass}</p>
                            <p><span class="font-medium">Tipo:</span> ${ipType}</p>
                        </div>
                    </div>
                    <div class="bg-green-100 dark:bg-green-900/30 rounded-lg p-4">
                        <h3 class="font-semibold text-green-800 dark:text-green-300 mb-2">Estatísticas</h3>
                        <div class="space-y-1 text-sm">
                            <p><span class="font-medium">Bits de Rede:</span> ${r.networkBits}</p>
                            <p><span class="font-medium">Bits de Host:</span> ${r.hostBits}</p>
                        </div>
                    </div>
                    <div class="bg-purple-100 dark:bg-purple-900/30 rounded-lg p-4">
                        <h3 class="font-semibold text-purple-800 dark:text-purple-300 mb-2">Utilização</h3>
                        <div class="space-y-1 text-sm">
                            <p><span class="font-medium">Pequena:</span> &lt; 30 hosts (≥/27)</p>
                            <p><span class="font-medium">Média:</span> 30-254 hosts (/24-/26)</p>
                            <p><span class="font-medium">Grande:</span> &gt; 254 hosts (≤/23)</p>
                        </div>
                    </div>
                </div>
            `;
        }
    };
    ipv4.init();

    // --- IPv6 Calculator ---
    const ipv6CalculatorHTML = `
        <div class="grid lg:grid-cols-3 gap-6 mb-8">
            <div class="lg:col-span-2 space-y-4">
                <div>
                    <label class="block text-sm font-semibold mb-2">Endereço IPv6</label>
                    <input type="text" id="ipv6-address" value="2001:0db8:85a3::8a2e:0370:7334" class="form-input font-mono text-sm">
                    <div id="ipv6-example-addresses" class="mt-2 flex flex-wrap gap-2"></div>
                </div>
                <div>
                    <label id="ipv6-prefix-label" class="block text-sm font-semibold mb-2">Prefix Length (/64)</label>
                    <div class="flex items-center gap-4">
                        <input type="range" min="0" max="128" value="64" id="ipv6-prefix-slider" class="flex-1 h-2 bg-slate-200 dark:bg-slate-700 rounded-lg appearance-none cursor-pointer">
                        <input type="number" min="0" max="128" value="64" id="ipv6-prefix-number" class="w-20 px-3 py-2 form-input text-center font-mono">
                    </div>
                </div>
                <div id="ipv6-error" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg hidden"></div>
            </div>
            <div class="bg-slate-100 dark:bg-slate-800/50 rounded-lg p-4">
                <h3 class="font-semibold mb-3">Prefixos Comuns</h3>
                <div id="ipv6-common-prefixes" class="max-h-80 overflow-y-auto"></div>
            </div>
        </div>
        <div id="ipv6-results-container" class="space-y-6"></div>
    `;
    calculatorIPv6.innerHTML = ipv6CalculatorHTML;

    const ipv6 = {
        addressInput: document.getElementById('ipv6-address'),
        prefixSlider: document.getElementById('ipv6-prefix-slider'),
        prefixNumber: document.getElementById('ipv6-prefix-number'),
        prefixLabel: document.getElementById('ipv6-prefix-label'),
        errorDiv: document.getElementById('ipv6-error'),
        resultsContainer: document.getElementById('ipv6-results-container'),
        exampleAddressesContainer: document.getElementById('ipv6-example-addresses'),
        commonPrefixesContainer: document.getElementById('ipv6-common-prefixes'),

        commonPrefixes: [
            { prefix: 128, description: 'Host único', usage: 'Loopback, host específico' }, { prefix: 127, description: 'Link ponto-a-ponto', usage: 'Conexões diretas' },
            { prefix: 64, description: 'Sub-rede padrão', usage: 'Padrão para LANs' }, { prefix: 56, description: 'Site típico', usage: '256 sub-redes /64' },
            { prefix: 48, description: 'Organização', usage: '65,536 sub-redes /64' }, { prefix: 32, description: 'ISP/RIR', usage: 'Alocação para ISPs' }
        ],
        exampleAddresses: [ '2001:db8::1', 'fe80::1', '::1', 'fc00::1', '2001:db8:85a3::8a2e:370:7334' ],

        init() {
            this.addressInput.addEventListener('input', () => this.calculateSubnet());
            this.prefixSlider.addEventListener('input', (e) => this.updatePrefix(e.target.value));
            this.prefixNumber.addEventListener('input', (e) => this.updatePrefix(e.target.value));
            this.renderCommonPrefixes();
            this.renderExampleAddresses();
            this.calculateSubnet();
        },

        updatePrefix(value) {
            const val = Math.max(0, Math.min(128, parseInt(value) || 0));
            this.prefixSlider.value = val;
            this.prefixNumber.value = val;
            this.prefixLabel.textContent = `Prefix Length (/${val})`;
            this.calculateSubnet();
        },

        renderCommonPrefixes() {
            const container = document.createElement('div');
            container.className = 'space-y-2';
            this.commonPrefixes.forEach(item => {
                const div = document.createElement('div');
                div.className = 'p-2 hover:bg-purple-100 dark:hover:bg-purple-900/50 cursor-pointer rounded';
                div.innerHTML = `
                    <div class="flex justify-between items-start">
                        <span class="font-mono text-accent-color font-bold">/${item.prefix}</span>
                    </div>
                    <div class="text-xs secondary mt-1">
                        <div class="font-medium">${item.description}</div>
                        <div class="text-text-color-light">${item.usage}</div>
                    </div>
                `;
                div.addEventListener('click', () => this.updatePrefix(item.prefix));
                container.appendChild(div);
            });
            this.commonPrefixesContainer.appendChild(container);
        },

        renderExampleAddresses() {
            this.exampleAddresses.forEach(addr => {
                const btn = document.createElement('button');
                btn.className = 'px-3 py-1 bg-slate-100 dark:bg-slate-800 hover:bg-purple-100 dark:hover:bg-purple-900/50 rounded text-xs font-mono text-slate-600 dark:text-slate-300 hover:text-purple-600 transition-colors';
                btn.textContent = addr.length > 25 ? addr.substring(0, 25) + '...' : addr;
                btn.addEventListener('click', () => {
                    this.addressInput.value = addr;
                    this.calculateSubnet();
                });
                this.exampleAddressesContainer.appendChild(btn);
            });
        },

        expandIPv6: (ip) => {
            ip = ip.replace(/\s/g, '');
            if (ip.includes('::')) {
                const parts = ip.split('::');
                const left = parts[0] ? parts[0].split(':') : [];
                const right = parts[1] ? parts[1].split(':') : [];
                const middle = Array(8 - left.length - right.length).fill('0000');
                ip = [...left, ...middle, ...right].join(':');
            }
            return ip.split(':').map(group => group.padStart(4, '0')).join(':');
        },
        compressIPv6: (ip) => {
            let compressed = ip.split(':').map(g => g.replace(/^0+/, '') || '0').join(':');
            const zeroGroups = compressed.match(/(^|:)(0:)+/g);
            if (zeroGroups) {
                const longest = zeroGroups.reduce((a, b) => a.length > b.length ? a : b);
                if (longest.length > 2) compressed = compressed.replace(longest, longest.startsWith(':') ? '::' : '::');
            }
            return compressed;
        },
        ipv6ToBinary: (ip) => {
            const expanded = ipv6.expandIPv6(ip);
            return expanded.split(':').map(g => parseInt(g, 16).toString(2).padStart(16, '0')).join(':');
        },
        binaryToIPv6: (bin) => {
            const groups = bin.split(':').map(g => parseInt(g, 2).toString(16).padStart(4, '0'));
            return ipv6.compressIPv6(groups.join(':'));
        },
        isValidIPv6: (ip) => /^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/.test(ip.split('%')[0]),
        getIPv6Type: (ip) => {
            const expanded = ipv6.expandIPv6(ip).toLowerCase();
            if (expanded === '0000:0000:0000:0000:0000:0000:0000:0001') return 'Loopback';
            if (expanded === '0000:0000:0000:0000:0000:0000:0000:0000') return 'Unspecified';
            if (expanded.startsWith('fe80')) return 'Link-Local';
            if (expanded.startsWith('fc00') || expanded.startsWith('fd00')) return 'Unique Local';
            if (expanded.startsWith('ff')) return 'Multicast';
            if (expanded.startsWith('2001:0db8')) return 'Documentation';
            if (expanded.startsWith('2') || expanded.startsWith('3')) return 'Global Unicast';
            return 'Reserved/Unknown';
        },
        
        calculateSubnet() {
            this.errorDiv.classList.add('hidden');
            const address = this.addressInput.value;
            const prefix = parseInt(this.prefixSlider.value);

            if (!this.isValidIPv6(address)) {
                this.errorDiv.textContent = 'Endereço IPv6 inválido';
                this.errorDiv.classList.remove('hidden');
                this.resultsContainer.innerHTML = '';
                return;
            }

            const expanded = this.expandIPv6(address);
            const binary = this.ipv6ToBinary(expanded);
            const binaryFlat = binary.replace(/:/g, '');

            const networkBinaryFlat = binaryFlat.substring(0, prefix) + '0'.repeat(128 - prefix);
            const lastBinaryFlat = binaryFlat.substring(0, prefix) + '1'.repeat(128 - prefix);

            const toColonFormat = (flat) => flat.match(/.{1,16}/g).join(':');

            const networkAddress = this.binaryToIPv6(toColonFormat(networkBinaryFlat));
            const lastAddress = this.binaryToIPv6(toColonFormat(lastBinaryFlat));
            
            const hostBits = 128 - prefix;
            const totalAddresses = hostBits > 64 ? `2^${hostBits}` : BigInt(2) ** BigInt(hostBits);

            const results = {
                inputAddress: address, expandedAddress: expanded, compressedAddress: this.compressIPv6(expanded),
                prefixLength: prefix, networkAddress, firstAddress: networkAddress, lastAddress,
                networkBinary: toColonFormat(networkBinaryFlat), inputBinary: binary, addressType: this.getIPv6Type(expanded),
                networkBits: prefix, hostBits, totalAddresses
            };

            this.renderResults(results);
        },

        renderResults(r) {
            this.resultsContainer.innerHTML = `
                <h2 class="text-2xl font-bold border-b border-border-color pb-2">Análise do Endereço IPv6</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                    <div class="bg-purple-100 dark:bg-purple-900/30 rounded-lg p-4"><h3 class="font-semibold text-purple-800 dark:text-purple-300 mb-2">Tipo de Endereço</h3><p class="text-sm font-mono text-purple-700 dark:text-purple-400">${r.addressType}</p></div>
                    <div class="bg-blue-100 dark:bg-blue-900/30 rounded-lg p-4"><h3 class="font-semibold text-blue-800 dark:text-blue-300 mb-2">Bits de Rede</h3><p class="text-sm font-mono text-blue-700 dark:text-blue-400">${r.networkBits} bits</p></div>
                    <div class="bg-green-100 dark:bg-green-900/30 rounded-lg p-4"><h3 class="font-semibold text-green-800 dark:text-green-300 mb-2">Bits de Host</h3><p class="text-sm font-mono text-green-700 dark:text-green-400">${r.hostBits} bits</p></div>
                    <div class="bg-yellow-100 dark:bg-yellow-900/30 rounded-lg p-4"><h3 class="font-semibold text-yellow-800 dark:text-yellow-300 mb-2">Endereços Possíveis</h3><p class="text-sm font-mono text-yellow-700 dark:text-yellow-400">${typeof r.totalAddresses === 'bigint' ? r.totalAddresses.toLocaleString() : r.totalAddresses}</p></div>
                </div>
                <div class="border border-border-color rounded-lg overflow-hidden">
                    <table class="w-full">
                        <thead class="bg-slate-100 dark:bg-slate-800/50">
                            <tr>
                                <th class="px-6 py-4 text-left font-semibold">Campo</th>
                                <th class="px-6 py-4 text-left font-semibold">Valor</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-border-color">
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50"><td class="px-6 py-4 font-medium">Formato Expandido</td><td class="px-6 py-4 font-mono text-sm text-blue-600 break-all">${r.expandedAddress}</td></tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50"><td class="px-6 py-4 font-medium">Formato Comprimido</td><td class="px-6 py-4 font-mono text-sm text-green-600 break-all">${r.compressedAddress}</td></tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-blue-50 dark:bg-blue-900/20"><td class="px-6 py-4 font-medium">Endereço de Rede</td><td class="px-6 py-4 font-mono text-sm font-bold text-blue-700 dark:text-blue-400 break-all">${r.networkAddress}</td></tr>
                            <tr class="hover:bg-slate-50 dark:hover:bg-slate-800/50 bg-red-50 dark:bg-red-900/20"><td class="px-6 py-4 font-medium">Último Endereço</td><td class="px-6 py-4 font-mono text-sm font-bold text-red-700 dark:text-red-400 break-all">${r.lastAddress}</td></tr>
                        </tbody>
                    </table>
                </div>
            `;
        }
    };
    ipv6.init();

    // --- Interactive Troubleshooting Lab ---
    const lab = {
        title: document.getElementById('lab-title'),
        scenario: document.getElementById('lab-scenario'),
        output: document.getElementById('lab-output'),
        commands: document.getElementById('lab-commands'),
        choices: document.getElementById('lab-choices'),
        feedback: document.getElementById('lab-feedback'),
        currentState: 'start',
        history: [],

        states: {
            'start': {
                title: 'Cenário: Usuário sem acesso à Internet',
                scenario: 'Um usuário no departamento de Vendas liga para o suporte, informando que não consegue acessar nenhum site. Outros usuários no mesmo departamento não relatam problemas. Onde você começa?',
                commands: ['ipconfig /all', 'ping 192.168.10.1', 'ping 8.8.8.8'],
                choices: [
                    { text: 'Verificar a configuração IP do computador do usuário.', next: 'check_ip' },
                    { text: 'Testar a conectividade com o gateway da rede.', next: 'check_gateway' },
                    { text: 'Testar a conectividade com um servidor externo (DNS do Google).', next: 'check_dns' }
                ]
            },
            'check_ip': {
                output: `
C:\> ipconfig /all
<br>
Configuração de IP do Windows
...<br>
Adaptador Ethernet Ethernet0:
   Endereço IPv4. . . . . . . .  . . . . : 169.254.80.14(Preferencial)
   Máscara de Sub-rede . . . . . . . . . : 255.255.0.0
   Gateway Padrão. . . . . . . . . . . . :
                `,
                analysis: 'O resultado mostra um endereço APIPA (169.254.x.x). Isso indica que o computador não conseguiu obter um endereço IP do servidor DHCP. O problema é local, na máquina do usuário ou na sua conexão com a rede.',
                choices: [
                    { text: 'Verificar o cabo de rede do computador.', next: 'check_cable', correct: true },
                    { text: 'Reiniciar o roteador da empresa.', next: 'restart_router_wrong' }
                ]
            },
            'check_gateway': {
                output: `
C:\> ping 192.168.10.1
<br>
Disparando 192.168.10.1 com 32 bytes de dados:
Esgotado o tempo limite do pedido.
Esgotado o tempo limite do pedido.
...<br>
Estatísticas do Ping para 192.168.10.1:
    Pacotes: Enviados = 4, Recebidos = 0, Perdidos = 4 (100% de perda)
                `,
                analysis: 'O computador não consegue se comunicar com o gateway padrão. Isso confirma que há um problema de conectividade fundamental entre a máquina e a rede local.',
                 choices: [
                    { text: 'Executar `ipconfig /all` para ver a configuração de IP.', next: 'check_ip', correct: true },
                    { text: 'Verificar o firewall do servidor.', next: 'check_firewall_wrong' }
                ]
            },
            'check_dns': {
                output: `
C:\> ping 8.8.8.8
Host de destino inacessível.
Host de destino inacessível.
                `,
                analysis: 'O ping para um IP externo falha, mas a mensagem "Host de destino inacessível" em vez de "Esgotado o tempo limite" sugere que o problema é anterior, provavelmente o computador nem sabe como sair da própria rede (falta de gateway).',
                 choices: [
                    { text: 'Verificar a conectividade com o gateway (`ping 192.168.10.1`).', next: 'check_gateway', correct: true },
                ]
            },
            'check_cable': {
                title: 'Problema Resolvido!',
                scenario: 'Você pede ao usuário para verificar o cabo de rede e ele percebe que estava desconectado. Após reconectar, você pede para ele reiniciar o computador.',
                commands: ['ipconfig /all'],
                output: `
C:\> ipconfig /all
<br>
Configuração de IP do Windows
...<br>
Adaptador Ethernet Ethernet0:
   Endereço IPv4. . . . . . . .  . . . . : 192.168.10.115(Preferencial)
   Máscara de Sub-rede . . . . . . . . . : 255.255.255.0
   Gateway Padrão. . . . . . . . . . . . : 192.168.10.1
   Servidores DNS. . . . . . . . . . . . : 192.168.10.5
                                           8.8.8.8
                `,
                analysis: 'Diagnóstico Final: O problema era uma falha na Camada 1 (Física). O cabo de rede estava desconectado, impedindo o computador de contatar o servidor DHCP para obter um endereço IP válido. A reconexão do cabo resolveu o problema de conectividade.',
                choices: [
                    { text: 'Reiniciar o cenário.', next: 'start' }
                ]
            },
             'restart_router_wrong': {
                feedback: { type: 'error', text: 'Incorreto. Reiniciar o roteador afetaria toda a empresa, mas o problema foi relatado por apenas um usuário. O diagnóstico deve começar pelo ponto mais próximo do problema: a máquina do usuário.' },
                previous: 'check_ip'
            },
            'check_firewall_wrong': {
                feedback: { type: 'error', text: 'Incorreto. Embora um firewall pudesse bloquear o ping, a falha em alcançar o gateway geralmente aponta para um problema de configuração de IP ou conectividade de Camada 2, que deve ser investigado primeiro.' },
                previous: 'check_gateway'
            }
        },

        init() {
            this.render(this.states.start);
            this.currentState = 'start';
        },

        render(state) {
            this.feedback.classList.add('hidden');
            this.title.textContent = state.title || this.states.start.title;
            this.scenario.textContent = state.scenario || '';
            
            if (state.output) {
                this.history.push(state.output.replace(/\n/g, '<br>'));
            }
            this.output.innerHTML = this.history.join('<hr class="border-border-color my-2">');
            this.output.scrollTop = this.output.scrollHeight;

            this.commands.innerHTML = '';
            if(state.commands) {
                state.commands.forEach(cmd => {
                    const btn = document.createElement('button');
                    btn.className = 'btn btn-secondary text-sm';
                    btn.textContent = cmd;
                    btn.onclick = () => this.runCommand(cmd);
                    this.commands.appendChild(btn);
                });
            }

            this.choices.innerHTML = '';
            if (state.analysis) {
                const analysisP = document.createElement('p');
                analysisP.className = 'text-sm italic p-4 bg-slate-100 dark:bg-slate-800/50 rounded-lg';
                analysisP.innerHTML = `<strong>Análise:</strong> ${state.analysis}`;
                this.choices.appendChild(analysisP);
            }
            if(state.choices) {
                 const choicesTitle = document.createElement('p');
                 choicesTitle.className = 'text-sm font-semibold mt-4 mb-2';
                 choicesTitle.textContent = 'Qual seu próximo passo?';
                 this.choices.appendChild(choicesTitle);
                state.choices.forEach(choice => {
                    const btn = document.createElement('button');
                    btn.className = 'btn btn-secondary block w-full text-left';
                    btn.textContent = choice.text;
                    btn.onclick = () => this.makeChoice(choice);
                    this.choices.appendChild(btn);
                });
            }
            
            if (state.feedback) {
                this.showFeedback(state.feedback);
                this.render(this.states[state.previous]);
            }
        },

        runCommand(cmd) {
            const commandStateMap = {
                'ipconfig /all': 'check_ip',
                'ping 192.168.10.1': 'check_gateway',
                'ping 8.8.8.8': 'check_dns'
            };
            const nextStateKey = commandStateMap[cmd];
            if (nextStateKey) {
                this.currentState = nextStateKey;
                this.render(this.states[nextStateKey]);
            }
        },

        makeChoice(choice) {
            if (choice.next === 'start') {
                this.history = [];
            }
            this.currentState = choice.next;
            this.render(this.states[choice.next]);
        },

        showFeedback(feedback) {
            this.feedback.textContent = feedback.text;
            this.feedback.classList.remove('hidden', 'bg-green-100', 'text-green-800', 'bg-red-100', 'text-red-800');
            this.feedback.classList.add(
                feedback.type === 'success' ? 'bg-green-100' : 'bg-red-100',
                feedback.type === 'success' ? 'dark:bg-green-900/50' : 'dark:bg-red-900/50',
                feedback.type === 'success' ? 'text-green-800' : 'text-red-800',
                feedback.type === 'success' ? 'dark:text-green-300' : 'dark:text-red-300'
            );
        }
    };

    lab.init();

});
</script>
</body>
</html>
